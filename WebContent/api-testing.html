<!DOCTYPE html>
<html>
	<head>
		<link rel="icon" type="image/png" href="assets/img/favicon.ico">
		<title>API TESTING</title>
		<!-- jQuery -->
		<script src="http://code.jquery.com/jquery-3.2.0.min.js"></script>

		<script>
		function fetch() {
			console.log("Fetching news...");

			// AP
			$.ajax({
				dataType: "json",
				// Grabs JSON from url
				url: "https://newsapi.org/v1/articles?source=associated-press&sortBy=top&apiKey=4a4f44aaabb84ddb9f8523e725b22757",
				success: function(response) {
					// "response" is a JSON with the returned data
					console.log(response);
					// "articles" is an array of articles
					articles = response.articles;

					$("#content").append("<h2>from AP:</h2><hr>");
					for (var i = 0; i < articles.length; i++) {
						currentArticle = articles[i];
						$("#content").append("<a href=" + JSON.stringify(currentArticle.url) + "><h3>" + JSON.stringify(currentArticle.title) + "</h3><a/>");

						$("#content").append("<p>" + clean_stringify(currentArticle.description) + "</p>");
						$("#content").append("<img height='120px' src='" + currentArticle.urlToImage + "'>");
						$("#content").append("<hr>");
					}
				}
			});

			function clean_stringify(input_string) {
				return JSON.stringify(input_string).replace("\\", "").replace("\\", "").replace("\\", "").replace("\\", "");
			}
		}
		</script>
	</head>

	<body>
	<button type="button" onclick='fetch()'>fetch!</button>
	<h1>Fetched data:</h1>
	<div id="content"></div>
	</body>
</html>
